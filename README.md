# 성능 테스트 보고서  
**대상 서비스 / API**: 쿠폰 발급 API (예: `/covy-coupon/coupon/apply`)  
**테스트 도구**:  
**테스트 날짜**: 2025-12-05  
**테스트 목적**: 고부하 상황에서 서비스 안정성, 처리량(throughput), 응답 속도(latency), 오류율(error rate) 확인  

---

## 🔧 테스트 시나리오  

- 가상 사용자 수 (VUs): 5000  
- 지속 시간 (duration): 10초 (그 후 graceful stop 30초)  
- 총 요청 수: 약 219,005
- 요청 유형: POST `/covy-coupon/coupon/apply` (쿠폰 신청)  
- 체크 조건 (check): HTTP 응답 status == 200 (“is OK”)  

---

## 📊 주요 결과 지표  

| 항목 | 결과 |
|------|------|
| 총 요청 (http_reqs) | 219,005 건 |
| 성공률 (checks_succeeded) | 100.00% (219,005 / 219,005) |
| 실패율 (http_req_failed) | 0.00% |
| 평균 응답시간 (avg latency) | **227 ms** |
| 중앙값 응답시간 (median, p50) | 227 ms |
| p(90) 응답시간 | 290 ms |
| p(95) 응답시간 | 301 ms |
| 최대 응답시간 (max) | 379 ms |
| Throughput (요청/sec, 평균) | 약 21,488 req/s |

---

## ✅ 해석 & 평가  

- 동시 5,000명의 가상 사용자가 동시에 요청하는 **극한 부하 조건**에서도,  
  → **실패율 0%, 높은 성공률**로 안정적으로 처리됨.  
- 대부분 요청에 대해 **응답시간 230 ms 내외**, p95 기준 **약 300 ms 이하** 유지 — 상당히 양호한 응답 성능.  
- Throughput 또한 높은 수준 (약 19k req/s) — 고부하 상황에서 서버가 충분히 버티고 있다는 의미.  
- 즉, “대량 동시 요청 + 빠른 응답 + 무에러” 조건을 모두 만족한, **안정성과 성능** 면에서 균형 잡힌 결과.  

---

## ⚠️ 한계점 & 보완해야 할 항목  

- 테스트는 “가장 단순한 API 호출 (쿠폰 신청 → 응답)” 기준 — 실제 운영 환경에서는 DB 쓰기, 인증/인가, 캐시, 기타 로직 등 여러 요소가 섞됨 → 동일 성능 보장 여부는 별도 검증 필요.  
- 장시간 부하 / 스파이크 테스트 (soak test, stress test) 미실시 — 현재는 짧은 burst 테스트만.  
- 내부 처리 시간 vs 네트워크/인프라/스레드/GC 등의 원인 구분이 없음 — 어떤 요소가 병목인지 알기 어렵다.  
- 리포트는 “콘솔 로그 + 숫자” 기반 — 가능하면 그래프/시각화 (예: latency 분포, 요청 속도 추이, 리소스 사용률) 포함하면 더 설득력 있음.  

---

## 📈 다음 단계 제안 — 추가 테스트 & 모니터링 계획  

1. **운영 환경 시나리오 그대로 부하 테스트**  
   - 실제 DB 쓰기, 인증, 캐시, 외부 호출 포함한 복합 요청 시나리오  
   - 사용자 패턴 반영 (예: 평소 트래픽 + 피크 트래픽 + 혼합 요청)  

2. **장시간 부담 테스트 (Soak / Stress Test)**  
   - 5분 ~ 30분 이상 지속 부하, spike / ramp-up / ramp-down 포함  
   - 안정성, 메모리 누수, 리소스 고갈, 오류 누적 여부 체크  

3. **서버 내부 메트릭 + APM / 모니터링 연동**  
   - 응답 지연 원인 분석: CPU / 메모리 / GC / 스레드풀 / I/O / 네트워크 등  
   - latency 분포, 쓰레드 상태, 리소스 사용률, 오류 로그 등 수집  

4. **성능 목표 / SLA 설정 + 재검증**  
   - 예: "95% 요청을 300ms 이하 응답", "오류율 < 0.1%", "동시 5000명 + TPS 15k 견딤" 등 목표 정하고 이 목표 달성 여부 주기적으로 테스트 & 검증  

---
