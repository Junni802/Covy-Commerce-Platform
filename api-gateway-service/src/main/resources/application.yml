server:
  port: 8000

eureka:
  client:
    register-with-eureka: true
    fetch-registry: true

spring:
  application:
    name: api-gateway-service
  #  rabbitmq:
  #    host: 127.0.0.1
  #    port: 5672
  #    stream:
  #      username: guest
  #      password: guest
  cloud:
    gateway:
      default-filters:
      #        - name: GlobalFilter
      #          args:
      #            baseMessage: spring Cloud Gateway Global Filter
      #            preLogger: true
      #            postLogger: true
      #        - name: LoggingFilter
      #          args:
      #            baseMessage: Hi, there.
      #            preLogger: true
      #            postLogger: true
      routes:
        - id: covy-user
          uri: lb://COVY-USER
          predicates:
            - Path=/covy-user/**
          #            - Method=POST
          filters:
            - RemoveRequestHeader=Cookie
            - RewritePath=/covy-user/(?<segment>.*), /$\{segment}
        - id: covy-userã…‹
          uri: lb://COVY-USER
          predicates:
            - Path=/covy-user/users
            - Method=POST
          filters:
            - RemoveRequestHeader=Cookie
            - RewritePath=/covy-user/(?<segment>.*), /$\{segment}
        - id: covy-user
          uri: lb://COVY-USER
          predicates:
            - Path=/covy-user/actuator/**
            - Method=GET, POST
          filters:
            - RemoveRequestHeader=Cookie
            - RewritePath=/covy-user/(?<segment>.*), /$\{segment}
        - id: covy-goods
          uri: lb://COVY-GOODS
          predicates:
            - Path=/covy-goods/**
          filters:
            - RemoveRequestHeader=Cookie
            - RewritePath=/covy-goods/(?<segment>.*), /$\{segment}
            - JwtAuthGatewayFilter
        - id: covy-order
          uri: lb://COVY-ORDER
          predicates:
            - Path=/covy-order/**
          filters:
            - RemoveRequestHeader=Cookie
            - RewritePath=/covy-order/(?<segment>.*), /$\{segment}


#jwt:
#  header: Authorization
#  secret: a2FyaW10b2thcmltdG9rYXJpbXRva2FyaW10b2thcmltdG9rYXJpbXRva2FyaW10b2thcmltdG9==
#  token_expiration_time: 86400000 # ttl (?)
management:
  endpoints:
    web:
      exposure:
        include: refresh, health, beans, httptrace, busrefresh, info, metrics, prometheus

jwt:
  header: Authorization
  secret: a2FyaW10b2thcmltdG9rYXJpbXRva2FyaW10b2thcmltdG9rYXJpbXRva2FyaW10b2thcmltdG9==
  token_expiration_time: 86400000 # ttl (?)